<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Annotations reference • plumber</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><!-- docsearch --><script src="../docsearch.js"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.3/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous">
<link href="../docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script><meta property="og:title" content="Annotations reference">
<meta property="og:description" content="plumber">
<meta property="og:image" content="https://www.rplumber.io/logo.svg">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">plumber</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.1.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/introduction.html">Introduction</a>
    </li>
    <li>
      <a href="../articles/quickstart.html">Quickstart</a>
    </li>
    <li>
      <a href="../articles/routing-and-input.html">Routing &amp; Input</a>
    </li>
    <li>
      <a href="../articles/rendering-output.html">Rendering Output</a>
    </li>
    <li>
      <a href="../articles/execution-model.html">Runtime</a>
    </li>
    <li>
      <a href="../articles/security.html">Security</a>
    </li>
    <li>
      <a href="../articles/hosting.html">Hosting</a>
    </li>
    <li>
      <a href="../articles/programmatic-usage.html">Programmatic Usage</a>
    </li>
    <li>
      <a href="../articles/annotations.html">Annotations reference</a>
    </li>
    <li>
      <a href="../articles/tips-and-tricks.html">Tips &amp; Tricks</a>
    </li>
    <li>
      <a href="../articles/migration.html">Migration Guide</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    News
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li class="dropdown-header">Releases</li>
    <li>
      <a href="https://blog.rstudio.com/2021/03/29/plumber-v1-1-0/" class="external-link">Version 1.1.0</a>
    </li>
    <li class="divider">
    </li>
<li>
      <a href="../news/index.html">Changelog</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/rstudio/plumber/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
<form class="navbar-form navbar-right hidden-xs hidden-sm" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
</div>
      </form>
      
    </div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="annotations_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Annotations reference</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/rstudio/plumber/blob/HEAD/vignettes/annotations.Rmd" class="external-link"><code>vignettes/annotations.Rmd</code></a></small>
      <div class="hidden name"><code>annotations.Rmd</code></div>

    </div>

    
    
<div class="section level2">
<h2 id="annotations">Annotations<a class="anchor" aria-label="anchor" href="#annotations"></a>
</h2>
<p>Annotations are specially-structured comments used in your plumber file to create an API. A full annotation line starts with <code>#*</code> or <code>#'</code>, then the annotation keyword <code>@...</code>, any number of space characters followed by the content. It is recommended to use <code>#*</code> to differentiate them from <code>roxygen2</code> annotations.</p>
</div>
<div class="section level2">
<h2 id="global-annotations">Global annotations<a class="anchor" aria-label="anchor" href="#global-annotations"></a>
</h2>
<p>Global annotations can be used anywhere in your plumber file. They are independent from other annotations and do not require an expression.</p>
<table class="table">
<colgroup>
<col width="26%">
<col width="19%">
<col width="53%">
</colgroup>
<thead><tr class="header">
<th>Annotation</th>
<th>Argument</th>
<th>Description/References</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code>@apiTitle</code></td>
<td><code>Title</code></td>
<td><a href="http://spec.openapis.org/oas/v3.0.3#info-object" class="external-link">Info Object</a></td>
</tr>
<tr class="even">
<td><code>@apiDescription</code></td>
<td><code>Description</code></td>
<td><a href="http://spec.openapis.org/oas/v3.0.3#info-object" class="external-link">Info Object</a></td>
</tr>
<tr class="odd">
<td><code>@apiTOS</code></td>
<td><code>TOS link</code></td>
<td><a href="http://spec.openapis.org/oas/v3.0.3#info-object" class="external-link">Info Object</a></td>
</tr>
<tr class="even">
<td><code>@apiContact</code></td>
<td><code>Contact object</code></td>
<td><a href="http://spec.openapis.org/oas/v3.0.3#contact-object" class="external-link">Contact Object</a></td>
</tr>
<tr class="odd">
<td><code>@apiLicense</code></td>
<td><code>License object</code></td>
<td><a href="http://spec.openapis.org/oas/v3.0.3#license-object" class="external-link">License Object</a></td>
</tr>
<tr class="even">
<td><code>@apiVersion</code></td>
<td><code>Version</code></td>
<td><a href="http://spec.openapis.org/oas/v3.0.3#info-object" class="external-link">Info Object</a></td>
</tr>
<tr class="odd">
<td><code>@apiTag</code></td>
<td>
<code>Tag</code> <code>Description</code>
</td>
<td>Can be repeated to add multiple tags. Quote with " or ’ to use non word character (like spaces) in <code>Tag</code>. <a href="http://spec.openapis.org/oas/v3.0.3#tag-object" class="external-link">Tag Object</a>
</td>
</tr>
</tbody>
</table>
<div class="section level5">
<h5 id="annotations-example">Annotations example<a class="anchor" aria-label="anchor" href="#annotations-example"></a>
</h5>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">#* @apiTitle Sample Pet Store App</span>
<span class="co">#* @apiDescription This is a sample server for a pet store.</span>
<span class="co">#* @apiTOS http://example.com/terms/</span>
<span class="co">#* @apiContact list(name = "API Support", url = "http://www.example.com/support", email = "support@example.com")</span>
<span class="co">#* @apiLicense list(name = "Apache 2.0", url = "https://www.apache.org/licenses/LICENSE-2.0.html")</span>
<span class="co">#* @apiVersion 1.0.1</span>
<span class="co">#* @apiTag pet Pets operations</span>
<span class="co">#* @apiTag toy Toys operations</span>
<span class="co">#* @apiTag "toy space" Toys operations</span></code></pre></div>
</div>
<div class="section level5">
<h5 id="equivalent-programmatic-usage">Equivalent programmatic usage<a class="anchor" aria-label="anchor" href="#equivalent-programmatic-usage"></a>
</h5>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/pr.html">pr</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="../reference/pr_set_api_spec.html">pr_set_api_spec</a></span><span class="op">(</span><span class="kw">function</span><span class="op">(</span><span class="va">spec</span><span class="op">)</span> <span class="op">{</span>
    <span class="va">spec</span><span class="op">$</span><span class="va">info</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>
      title <span class="op">=</span> <span class="st">"Sample Pet Store App"</span>,
      description <span class="op">=</span> <span class="st">"This is a sample server for a pet store."</span>,
      termsOfService <span class="op">=</span> <span class="st">"http://example.com/terms/"</span>,
      contact <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">"API Support"</span>, url <span class="op">=</span> <span class="st">"http://www.example.com/support"</span>, email <span class="op">=</span> <span class="st">"support@example.com"</span><span class="op">)</span>,
      license <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">"Apache 2.0"</span>, url <span class="op">=</span> <span class="st">"https://www.apache.org/licenses/LICENSE-2.0.html"</span><span class="op">)</span>,
      version <span class="op">=</span> <span class="st">"1.0.1"</span>
    <span class="op">)</span>
    <span class="va">spec</span><span class="op">$</span><span class="va">tags</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">"pet"</span>, description <span class="op">=</span> <span class="st">"Pets operations"</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">"toy"</span>, description <span class="op">=</span> <span class="st">"Toys operations"</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">"toy space"</span>, description <span class="op">=</span> <span class="st">"Toys operations"</span><span class="op">)</span><span class="op">)</span>
    <span class="va">spec</span>
  <span class="op">}</span><span class="op">)</span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="block-annotations">Block annotations<a class="anchor" aria-label="anchor" href="#block-annotations"></a>
</h2>
<p>A block of annotations is a combination of annotations that create either an <a href="./routing-and-input.html#endpoints">endpoint</a>, a <a href="./routing-and-input.html#filters">filter</a>, a <a href="./routing-and-input.html#static-file-handler">static file handler</a> or a Plumber object modifier. Block annotations are always followed by an expression.</p>
<div class="section level3">
<h3 id="endpoint-block-annotations">Endpoint<a class="anchor" aria-label="anchor" href="#endpoint-block-annotations"></a>
</h3>
<table class="table">
<colgroup>
<col width="26%">
<col width="19%">
<col width="53%">
</colgroup>
<thead><tr class="header">
<th>Annotation</th>
<th>Argument</th>
<th>Description/References</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>
<code>@get</code>, <code>@post</code>, <code>@put</code>, <code>@use</code>, <code>@delete</code>, <code>@head</code>, <code>@options</code>, <code>@patch</code>
</td>
<td><code>Path</code></td>
<td>
<a href="./routing-and-input.html#endpoints">Endpoints</a>, <a href="./routing-and-input.html#dynamic-routes">Dynamic Routes</a>, <a href="./routing-and-input.html#typed-dynamic-routes">Typed Dynamic Routes</a>
</td>
</tr>
<tr class="even">
<td><code>@serializer</code></td>
<td>
<code>Alias</code> [<code>Args list]</code>]</td>
<td>Some serializers accept arguments. See <a href="./rendering-output.html#serializers">serializers article</a> and <a href="https://www.rplumber.io/reference/serializers.html">serializers reference</a>. Aliases : <code>bmp</code>, <code>cat</code>, <code>contentType</code>, <code>csv</code>, <code>device</code>, <code>feather</code>, <code>format</code>, <code>geojson</code>, <code>html</code>, <code>htmlwidget</code>, <code>jpeg</code>, <code>json</code>, <code>null</code>, <code>pdf</code>, <code>png</code>, <code>print</code>, <code>rds</code>, <code>svg</code>, <code>text</code>, <code>tiff</code>, <code>tsv</code>, <code>unboxedJSON</code>, <code>yaml</code> from <a href="https://www.rplumber.io/reference/register_serializer.html"><code>registered_serializers()</code></a>.</td>
</tr>
<tr class="odd">
<td><code>@parser</code></td>
<td>
<code>Alias</code> <code>[Args list]</code>
</td>
<td>Some parsers accept arguments. See <a href="https://www.rplumber.io/reference/parsers.html">parsers reference</a>. Can be repeated to allow multiple parsers on the same endpoint. Aliases : <code>all</code>, <code>csv</code>, <code>feather</code>, <code>form</code>, <code>geojson</code>, <code>json</code>, <code>multi</code>, <code>none</code>, <code>octet</code>, <code>rds</code>, <code>text</code>, <code>tsv</code>, <code>yaml</code> from <a href="https://www.rplumber.io/reference/register_parser.html"><code>registered_parsers()</code></a>.</td>
</tr>
<tr class="even">
<td><code>@param</code></td>
<td>
<code>Name</code>[<code>:Type</code> <code>Description</code>]</td>
<td>Enclose <code>Type</code> between square brackets <code>[]</code> to indicate it is an array. Can be repeated to define different parameters.</td>
</tr>
<tr class="odd">
<td><code>@response</code></td>
<td>
<code>Name</code> <code>Description</code>
</td>
<td>Simple <a href="http://spec.openapis.org/oas/v3.0.3#response-object" class="external-link">Response object</a>. Can be repeated to define different responses.</td>
</tr>
<tr class="even">
<td><code>@tag</code></td>
<td><code>Tag</code></td>
<td>Can be repeated to add multiple tags. Quote with " or ’ to use non word character (like spaces) in <code>Tag</code>. <a href="http://spec.openapis.org/oas/v3.0.3#operation-object" class="external-link">Tag field</a>
</td>
</tr>
<tr class="odd">
<td><code>@preempt</code></td>
<td><code>Filter</code></td>
<td>Specify that this endpoint has to execute before <code>Filter</code>. <a href="./programmatic-usage.html#defining-filters">Filters</a>
</td>
</tr>
<tr class="even">
<td>None</td>
<td><code>Comments</code></td>
<td>Lines without annotation will be mapped to <a href="http://spec.openapis.org/oas/v3.0.3#fixed-fields-6" class="external-link">Summary field</a>.</td>
</tr>
</tbody>
</table>
<div class="section level4">
<h4 id="more-details-on-param">More details on <code>@param</code><a class="anchor" aria-label="anchor" href="#more-details-on-param"></a>
</h4>
<p>Types are used to define API inputs. You can use most of them in dynamic routes. Note that Plumber first look in block expression to set endpoint parameters names, types and default value. Then <code>@param</code> annotations and dynamic route/path defined parameters will override Plumber guesses from block expression.</p>
<p>Query parameters currently need to be explicitly converted as they are pushed as is (character) to block expression. Only dynamic route parameters are converted to specified <code>@param</code> type before being pushed to block expression.</p>
<p>Plumber parameter type to OpenAPI type reference. For programmatic use, pick the one with an asterisk.</p>
<table class="table">
<thead><tr class="header">
<th>Type</th>
<th>OpenAPI</th>
<th>Availability</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>
<code>bool</code>, <code>boolean</code>*, <code>logical</code>
</td>
<td><code>boolean</code></td>
<td>
<code>query</code>, <code>path</code>
</td>
</tr>
<tr class="even">
<td>
<code>dbl</code>, <code>double</code>, <code>float</code>, <code>number</code>*, <code>numeric</code>
</td>
<td>
<code>number</code> <code>format:double</code>
</td>
<td>
<code>query</code>, <code>path</code>
</td>
</tr>
<tr class="odd">
<td>
<code>int</code>, <code>integer</code>*</td>
<td>
<code>integer</code> <code>format:int64</code>
</td>
<td>
<code>query</code>, <code>path</code>
</td>
</tr>
<tr class="even">
<td>
<code>chr</code>, <code>str</code>, <code>character</code>, <code>string</code>*</td>
<td><code>string</code></td>
<td>
<code>query</code>, <code>path</code>
</td>
</tr>
<tr class="odd">
<td>
<code>list</code>, <code>data.frame</code>, <code>df</code>, <code>object</code>*</td>
<td><code>object</code></td>
<td><code>body</code></td>
</tr>
<tr class="even">
<td>
<code>file</code>*, <code>binary</code>
</td>
<td>
<code>string</code> <code>format:binary</code>
</td>
<td><code>body</code></td>
</tr>
</tbody>
</table>
<div class="section level5">
<h5 id="annotations-example-1">Annotations example<a class="anchor" aria-label="anchor" href="#annotations-example-1"></a>
</h5>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">#* @get /query/parameters</span>
<span class="co">#* @serializer text</span>
<span class="co">#* @param name:str</span>
<span class="co">#* @param age:[int]</span>
<span class="kw">function</span><span class="op">(</span><span class="va">name</span>, <span class="va">age</span><span class="op">)</span> <span class="op">{</span>
  <span class="co"># Explicit conversion is required for query parameters</span>
  <span class="va">age</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/integer.html" class="external-link">as.integer</a></span><span class="op">(</span><span class="va">age</span><span class="op">)</span>
  <span class="fu"><a href="https://rdrr.io/r/base/sprintf.html" class="external-link">sprintf</a></span><span class="op">(</span><span class="st">"%s is %i years old"</span>, <span class="va">name</span>, <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="va">age</span><span class="op">)</span><span class="op">)</span>
<span class="op">}</span>

<span class="co">#* @get /dyn/&lt;name:str&gt;/&lt;age:[int]&gt;/route</span>
<span class="co">#* @serializer text</span>
<span class="co">#* @parser none</span>
<span class="co">#* @response 200 A sentence</span>
<span class="kw">function</span><span class="op">(</span><span class="va">name</span>, <span class="va">age</span><span class="op">)</span> <span class="op">{</span>
  <span class="fu"><a href="https://rdrr.io/r/base/sprintf.html" class="external-link">sprintf</a></span><span class="op">(</span><span class="st">"%s is %i years old"</span>, <span class="va">name</span>, <span class="va">age</span><span class="op">)</span>
<span class="op">}</span>

<span class="co">#* @post /upload_file</span>
<span class="co">#* @serializer rds</span>
<span class="co">#* @parser multi</span>
<span class="co">#* @parser rds</span>
<span class="co">#* @param f:file A file</span>
<span class="co">#* Upload an rds file and return the object</span>
<span class="kw">function</span><span class="op">(</span><span class="va">f</span><span class="op">)</span> <span class="op">{</span>
  <span class="fu"><a href="../reference/as_attachment.html">as_attachment</a></span><span class="op">(</span><span class="va">f</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>, <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">f</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span>
<span class="op">}</span></code></pre></div>
</div>
<div class="section level5">
<h5 id="equivalent-programmatic-usage-1">Equivalent programmatic usage<a class="anchor" aria-label="anchor" href="#equivalent-programmatic-usage-1"></a>
</h5>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">text_handler</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">name</span>, <span class="va">age</span><span class="op">)</span> <span class="op">{</span> <span class="fu"><a href="https://rdrr.io/r/base/sprintf.html" class="external-link">sprintf</a></span><span class="op">(</span><span class="st">"%s is %i years old"</span>, <span class="va">name</span>, <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="va">age</span><span class="op">)</span><span class="op">)</span> <span class="op">}</span>
<span class="va">qp_handler</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">name</span>, <span class="va">age</span><span class="op">)</span> <span class="op">{</span> <span class="va">age</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/integer.html" class="external-link">as.integer</a></span><span class="op">(</span><span class="va">age</span><span class="op">)</span>; <span class="fu">text_handler</span><span class="op">(</span><span class="va">name</span>, <span class="va">age</span><span class="op">)</span> <span class="op">}</span>
<span class="va">file_handler</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">file</span><span class="op">)</span> <span class="op">{</span> <span class="fu"><a href="../reference/as_attachment.html">as_attachment</a></span><span class="op">(</span><span class="va">file</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>, <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">file</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span> <span class="op">}</span>
<span class="fu"><a href="../reference/pr.html">pr</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="../reference/pr_handle.html">pr_get</a></span><span class="op">(</span>path <span class="op">=</span> <span class="st">"/query/parameters"</span>,
         handler <span class="op">=</span> <span class="va">qp_handler</span>,
         serializer <span class="op">=</span> <span class="fu"><a href="../reference/serializers.html">serializer_text</a></span><span class="op">(</span><span class="op">)</span>,
         params <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"name"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>type <span class="op">=</span> <span class="st">"string"</span>, required <span class="op">=</span> <span class="cn">FALSE</span>, isArray <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>,
                       <span class="st">"age"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>type <span class="op">=</span> <span class="st">"integer"</span>, required <span class="op">=</span> <span class="cn">FALSE</span>, isArray <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="../reference/pr_handle.html">pr_get</a></span><span class="op">(</span>path <span class="op">=</span> <span class="st">"/dyn/&lt;name:str&gt;/&lt;age:[int]&gt;/route"</span>,
         handler <span class="op">=</span> <span class="va">text_handler</span>,
         serializer <span class="op">=</span> <span class="fu"><a href="../reference/serializers.html">serializer_text</a></span><span class="op">(</span><span class="op">)</span>,
         parsers <span class="op">=</span> <span class="st">"none"</span>,
         responses <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"200"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>description <span class="op">=</span> <span class="st">"A sentence"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="../reference/pr_handle.html">pr_post</a></span><span class="op">(</span>path <span class="op">=</span> <span class="st">"/upload_file"</span>,
          handler <span class="op">=</span> <span class="va">file_handler</span>,
          serializer <span class="op">=</span> <span class="fu"><a href="../reference/serializers.html">serializer_rds</a></span><span class="op">(</span><span class="op">)</span>,
          parsers <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"multi"</span>, <span class="st">"rds"</span><span class="op">)</span>,
          params <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"file"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>type <span class="op">=</span> <span class="st">"file"</span>, desc <span class="op">=</span> <span class="st">"A file"</span>, required <span class="op">=</span> <span class="cn">FALSE</span>, isArray <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span><span class="op">)</span>,
          comments <span class="op">=</span> <span class="st">"Upload an rds file and return the object"</span><span class="op">)</span></code></pre></div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="filter-block-annotations">Filter<a class="anchor" aria-label="anchor" href="#filter-block-annotations"></a>
</h3>
<table class="table">
<thead><tr class="header">
<th>Annotation</th>
<th>Argument</th>
<th>Description/References</th>
</tr></thead>
<tbody><tr class="odd">
<td><code>@filter</code></td>
<td><code>Filter name</code></td>
<td><a href="./routing-and-input.html#filters">Filters</a></td>
</tr></tbody>
</table>
<div class="section level5">
<h5 id="annotations-example-2">Annotations example<a class="anchor" aria-label="anchor" href="#annotations-example-2"></a>
</h5>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">#* @filter logger</span>
<span class="kw">function</span><span class="op">(</span><span class="va">req</span><span class="op">)</span><span class="op">{</span>
  <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html" class="external-link">Sys.time</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span>, <span class="st">"-"</span>,
    <span class="va">req</span><span class="op">$</span><span class="va">REQUEST_METHOD</span>, <span class="va">req</span><span class="op">$</span><span class="va">PATH_INFO</span>, <span class="st">"-"</span>,
    <span class="va">req</span><span class="op">$</span><span class="va">HTTP_USER_AGENT</span>, <span class="st">"@"</span>, <span class="va">req</span><span class="op">$</span><span class="va">REMOTE_ADDR</span>, <span class="st">"\n"</span><span class="op">)</span>
  <span class="fu">plumber</span><span class="fu">::</span><span class="fu"><a href="../reference/forward.html">forward</a></span><span class="op">(</span><span class="op">)</span>
<span class="op">}</span></code></pre></div>
</div>
<div class="section level5">
<h5 id="equivalent-programmatic-usage-2">Equivalent programmatic usage<a class="anchor" aria-label="anchor" href="#equivalent-programmatic-usage-2"></a>
</h5>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/pr.html">pr</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="../reference/pr_filter.html">pr_filter</a></span><span class="op">(</span><span class="st">"logger"</span>, <span class="kw">function</span><span class="op">(</span><span class="va">req</span><span class="op">)</span><span class="op">{</span>
    <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html" class="external-link">Sys.time</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span>, <span class="st">"-"</span>,
      <span class="va">req</span><span class="op">$</span><span class="va">REQUEST_METHOD</span>, <span class="va">req</span><span class="op">$</span><span class="va">PATH_INFO</span>, <span class="st">"-"</span>,
      <span class="va">req</span><span class="op">$</span><span class="va">HTTP_USER_AGENT</span>, <span class="st">"@"</span>, <span class="va">req</span><span class="op">$</span><span class="va">REMOTE_ADDR</span>, <span class="st">"\n"</span><span class="op">)</span>
    <span class="fu">plumber</span><span class="fu">::</span><span class="fu"><a href="../reference/forward.html">forward</a></span><span class="op">(</span><span class="op">)</span>
  <span class="op">}</span><span class="op">)</span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="static-block-annotations">Static File Handler<a class="anchor" aria-label="anchor" href="#static-block-annotations"></a>
</h3>
<table class="table">
<thead><tr class="header">
<th>Annotation</th>
<th>Arguments</th>
<th>Description/References</th>
</tr></thead>
<tbody><tr class="odd">
<td><code>@assets</code></td>
<td>
<code>Directory</code> [<code>Mount path</code>]</td>
<td><a href="./routing-and-input.html#static-file-handler">Static files</a></td>
</tr></tbody>
</table>
<div class="section level5">
<h5 id="annotations-example-3">Annotations example<a class="anchor" aria-label="anchor" href="#annotations-example-3"></a>
</h5>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">#* @assets ./files/static</span>
<span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>

<span class="co">#* @assets ./files/static /static</span>
<span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>

<span class="co">#* @assets ./files/static /</span>
<span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
</div>
<div class="section level5">
<h5 id="equivalent-programmatic-usage-note-that-argument-order-is-reversed">Equivalent programmatic usage (note that argument order is reversed)<a class="anchor" aria-label="anchor" href="#equivalent-programmatic-usage-note-that-argument-order-is-reversed"></a>
</h5>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/pr.html">pr</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="../reference/pr_static.html">pr_static</a></span><span class="op">(</span>direc <span class="op">=</span> <span class="st">"./files/static"</span><span class="op">)</span>

<span class="fu"><a href="../reference/pr.html">pr</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="../reference/pr_static.html">pr_static</a></span><span class="op">(</span><span class="st">"/static"</span>, <span class="st">"./files/static"</span><span class="op">)</span>

<span class="fu"><a href="../reference/pr.html">pr</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="../reference/pr_static.html">pr_static</a></span><span class="op">(</span><span class="st">"/"</span>, <span class="st">"./files/static"</span><span class="op">)</span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="plumber-block-annotations">Plumber Router Modifier<a class="anchor" aria-label="anchor" href="#plumber-block-annotations"></a>
</h3>
<table class="table">
<colgroup>
<col width="26%">
<col width="21%">
<col width="52%">
</colgroup>
<thead><tr class="header">
<th>Annotation</th>
<th>Arguments</th>
<th>Description/References</th>
</tr></thead>
<tbody><tr class="odd">
<td><code>@plumber</code></td>
<td>None</td>
<td>Modify plumber router from plumber file. The plumber router provided to the function <strong>must</strong> be returned. In most cases, anonymous functions are used following the <code>#* @plumber</code> annotation. However, named functions can also be used. When a named function is used, it must be referenced without parentheses.</td>
</tr></tbody>
</table>
<div class="section level5">
<h5 id="annotations-example-4">Annotations example<a class="anchor" aria-label="anchor" href="#annotations-example-4"></a>
</h5>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">#* @plumber</span>
<span class="kw">function</span><span class="op">(</span><span class="va">pr</span><span class="op">)</span> <span class="op">{</span>
  <span class="va">pr</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
    <span class="fu"><a href="../reference/pr_set_debug.html">pr_set_debug</a></span><span class="op">(</span><span class="cn">TRUE</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
    <span class="fu"><a href="../reference/pr_set_docs.html">pr_set_docs</a></span><span class="op">(</span><span class="st">"swagger"</span><span class="op">)</span>
<span class="op">}</span>

<span class="co"># Named function</span>
<span class="va">debug_swagger</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">pr</span><span class="op">)</span> <span class="op">{</span>
  <span class="va">pr</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
    <span class="fu"><a href="../reference/pr_set_debug.html">pr_set_debug</a></span><span class="op">(</span><span class="cn">TRUE</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
    <span class="fu"><a href="../reference/pr_set_docs.html">pr_set_docs</a></span><span class="op">(</span><span class="st">"swagger"</span><span class="op">)</span>
<span class="op">}</span>

<span class="co">#* @plumber</span>
<span class="va">debug_swagger</span></code></pre></div>
</div>
<div class="section level5">
<h5 id="equivalent-programmatic-usage-3">Equivalent programmatic usage<a class="anchor" aria-label="anchor" href="#equivalent-programmatic-usage-3"></a>
</h5>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/pr.html">pr</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="../reference/pr_set_debug.html">pr_set_debug</a></span><span class="op">(</span><span class="cn">TRUE</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="../reference/pr_set_docs.html">pr_set_docs</a></span><span class="op">(</span><span class="st">"swagger"</span><span class="op">)</span></code></pre></div>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by <a href="http://schloerke.com/" class="external-link">Barret Schloerke</a>, <a href="https://trestletech.com/" class="external-link">Jeff Allen</a>, RStudio.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.1.</p>
</div>

      </footer>
</div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script><script>
  docsearch({
    
    
    apiKey: 'e8f0e2420e2e9aac7973efb2cc877b06',
    indexName: 'rplumber',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>
</body>
</html>
