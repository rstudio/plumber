<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Quickstart • plumber</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Source_Sans_Pro-0.4.9/font.css" rel="stylesheet">
<link href="../deps/Source_Code_Pro-0.4.9/font.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Quickstart">
</head>
<body>
    <a href="#container" class="visually-hidden-focusable">Skip to content</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-none" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">plumber</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.3.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/introduction.html">Introduction</a></li>
    <li><a class="dropdown-item" href="../articles/quickstart.html">Quickstart</a></li>
    <li><a class="dropdown-item" href="../articles/routing-and-input.html">Routing &amp; Input</a></li>
    <li><a class="dropdown-item" href="../articles/rendering-output.html">Rendering Output</a></li>
    <li><a class="dropdown-item" href="../articles/execution-model.html">Runtime</a></li>
    <li><a class="dropdown-item" href="../articles/security.html">Security</a></li>
    <li><a class="dropdown-item" href="../articles/hosting.html">Hosting</a></li>
    <li><a class="dropdown-item" href="../articles/programmatic-usage.html">Programmatic Usage</a></li>
    <li><a class="dropdown-item" href="../articles/annotations.html">Annotations reference</a></li>
    <li><a class="dropdown-item" href="../articles/tips-and-tricks.html">Tips &amp; Tricks</a></li>
    <li><a class="dropdown-item" href="../articles/migration.html">Migration Guide</a></li>
  </ul>
</li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-news" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">News</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-news">
<li><h6 class="dropdown-header" data-toc-skip>Releases</h6></li>
    <li><a class="external-link dropdown-item" href="https://blog.rstudio.com/2021/03/29/plumber-v1-1-0/">Version 1.1.0</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../news/index.html">Changelog</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/rstudio/plumber/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article" id="container">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Quickstart</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/rstudio/plumber/blob/rc-v1.3.0/vignettes/quickstart.Rmd" class="external-link"><code>vignettes/quickstart.Rmd</code></a></small>
      <div class="d-none name"><code>quickstart.Rmd</code></div>
    </div>

    
    
<p>Plumber allows you to create APIs by merely decorating your existing
R code with special annotations. The example below shows a file named
<code>plumber.R</code> (the conventional name for Plumber APIs) which
defines an API.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># plumber.R</span></span>
<span></span>
<span><span class="co">#* Echo the parameter that was sent in</span></span>
<span><span class="co">#* @param msg The message to echo back.</span></span>
<span><span class="co">#* @get /echo</span></span>
<span><span class="kw">function</span><span class="op">(</span><span class="va">msg</span><span class="op">=</span><span class="st">""</span><span class="op">)</span><span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>msg <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"The message is: '"</span>, <span class="va">msg</span>, <span class="st">"'"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co">#* Plot out data from the iris dataset</span></span>
<span><span class="co">#* @param spec If provided, filter the data to only this species (e.g. 'setosa')</span></span>
<span><span class="co">#* @get /plot</span></span>
<span><span class="co">#* @serializer png</span></span>
<span><span class="kw">function</span><span class="op">(</span><span class="va">spec</span><span class="op">)</span><span class="op">{</span></span>
<span>  <span class="va">myData</span> <span class="op">&lt;-</span> <span class="va">iris</span></span>
<span>  <span class="va">title</span> <span class="op">&lt;-</span> <span class="st">"All Species"</span></span>
<span></span>
<span>  <span class="co"># Filter if the species was specified</span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/missing.html" class="external-link">missing</a></span><span class="op">(</span><span class="va">spec</span><span class="op">)</span><span class="op">)</span><span class="op">{</span></span>
<span>    <span class="va">title</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"Only the '"</span>, <span class="va">spec</span>, <span class="st">"' Species"</span><span class="op">)</span></span>
<span>    <span class="va">myData</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/subset.html" class="external-link">subset</a></span><span class="op">(</span><span class="va">iris</span>, <span class="va">Species</span> <span class="op">==</span> <span class="va">spec</span><span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">myData</span><span class="op">$</span><span class="va">Sepal.Length</span>, <span class="va">myData</span><span class="op">$</span><span class="va">Petal.Length</span>,</span>
<span>       main<span class="op">=</span><span class="va">title</span>, xlab<span class="op">=</span><span class="st">"Sepal Length"</span>, ylab<span class="op">=</span><span class="st">"Petal Length"</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>This file defines two Plumber “endpoints.” One is hosted at the path
<code>/echo</code> and simply echoes the message passed in; the other is
hosted at the path <code>/plot</code> and returns an image showing a
simple R plot.</p>
<p>If you haven’t installed <code>plumber</code> yet, see the <a href="./index.html#installation">installation section</a>. Once you have
<code>plumber</code> installed, you can use the <code><a href="../reference/pr.html">pr()</a></code>
function to translate this R file into a Plumber API:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">root</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/pr.html">pr</a></span><span class="op">(</span><span class="st">"plumber.R"</span><span class="op">)</span></span>
<span><span class="va">root</span></span></code></pre></div>
<p>The <code>pr</code> object now encapsulates all the logic represented
in your <code>plumber.R</code> file. The next step is to bring the API
to life using the <code><a href="../reference/pr_run.html">pr_run()</a></code> method:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">root</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="../reference/pr_run.html">pr_run</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>You should see a message about your API running on your computer on
port <code>8000</code>. The API will continue running in your R session
until you press the <code>Esc</code> key. If you’re running this code
locally on your personal machine, you should be able to open <a href="http://localhost:8000/echo" class="external-link">http://localhost:8000/echo</a> or <a href="http://localhost:8000/plot" class="external-link">http://localhost:8000/plot</a> in a
web browser to test your new API endpoints.</p>
<blockquote>
<p>If you’re using a tool like RStudio Server to run your R code on a
remote machine, you should see the <a href="./security.html#networking">networking section</a> for help with
visiting your API.</p>
</blockquote>
<p>The <code>/echo</code> endpoint should show output resembling the
following.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a>  <span class="dt">"msg"</span><span class="fu">:</span> <span class="ot">[</span><span class="st">"The message is: ''"</span><span class="ot">]</span></span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p>The <code>/plot</code> endpoint will show you a simple plot of some
data from the iris dataset.</p>
<p><img src="quickstart_files/figure-html/unnamed-chunk-4-1.png" width="700"></p>
<p>If you see something like the above: congratulations! You’ve just
created your first Plumber API! You’ve already exercised your API from a
web browser, but there’s nothing stopping you from leveraging this API
from third-party tools or a client developed in R or any other
programming language.</p>
<div class="section level2">
<h2 id="specifying-the-inputs">Specifying the Inputs<a class="anchor" aria-label="anchor" href="#specifying-the-inputs"></a>
</h2>
<p>You may have noticed that the functions that define our endpoints
accept parameters. These parameters allow us to customize the behavior
of our endpoints. One of the ways to do this is using “query strings”
which are a way of passing parameters into an HTTP API. If you visit <a href="http://localhost:8000/plot?spec=setosa" class="external-link">http://localhost:8000/plot?spec=setosa</a>,
you should see a similar graph to the one you saw before, but now the
dataset has been filtered to only include the “setosa” species in the
iris dataset.</p>
<p><img src="quickstart_files/figure-html/unnamed-chunk-5-1.png" width="700"></p>
<p>As you might have guessed, the <code>spec=setosa</code> portion of
the URL sets the <code>spec</code> parameter to <code>setosa</code>.
More details on how Plumber processes inputs are available in the <a href="./routing-and-input.html">Routing &amp; Input article</a>.</p>
</div>
<div class="section level2">
<h2 id="customizing-the-output">Customizing The Output<a class="anchor" aria-label="anchor" href="#customizing-the-output"></a>
</h2>
<p>In the previous example, you saw one endpoint that rendered into JSON
and one that produced an image. Unless instructed otherwise, Plumber
will attempt to render whatever your endpoint function returns as JSON.
However, you can specify alternative “serializers” which instruct
Plumber to render the output as some other format such as HTML
(<code>@serializer html</code>), PNG (<code>@serializer png</code>), or
JPEG (<code>@serializer jpeg</code>).</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#* @get /hello</span></span>
<span><span class="co">#* @serializer html</span></span>
<span><span class="kw">function</span><span class="op">(</span><span class="op">)</span><span class="op">{</span></span>
<span>  <span class="st">"&lt;html&gt;&lt;h1&gt;hello world&lt;/h1&gt;&lt;/html&gt;"</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>This endpoint would produce something like the following, when
visited. It also sets the appropriate <code>Content-Type</code> header
so that a browser that visits this page would know to render the result
as HTML.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode html"><code class="sourceCode html"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">html</span><span class="dt">&gt;&lt;</span><span class="kw">h1</span><span class="dt">&gt;</span>hello world<span class="dt">&lt;/</span><span class="kw">h1</span><span class="dt">&gt;&lt;/</span><span class="kw">html</span><span class="dt">&gt;</span></span></code></pre></div>
<p>You can even provide your own custom serializers and define how to
translate the R object produced by your endpoint into the bits that will
produce Plumber’s HTTP response.</p>
<p>You can find more details in the <a href="./rendering-output.html">Rendering &amp; Output article</a>.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



   </div>
  <footer><div class="container">
  <div class="pkgdown-footer-left">
  <p>Developed by <a href="http://schloerke.com" class="external-link">Barret Schloerke</a>, <a href="https://trestletech.com/" class="external-link">Jeff Allen</a>, <a href="https://www.posit.co" class="external-link"><img src="https://www.tidyverse.org/posit-logo.svg" alt="Posit" height="16" width="62" style="margin-bottom: 3px;"></a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

  </div></footer>
</body>
</html>
