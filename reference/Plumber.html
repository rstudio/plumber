<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Package Plumber Router — Plumber • plumber</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Source_Sans_Pro-0.4.9/font.css" rel="stylesheet"><link href="../deps/Source_Code_Pro-0.4.9/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Package Plumber Router — Plumber"><meta name="description" content="Package Plumber Router
Package Plumber Router"><meta property="og:description" content="Package Plumber Router
Package Plumber Router"><meta property="og:image" content="https://www.rplumber.io/logo.svg"></head><body>
    <a href="#container" class="visually-hidden-focusable">Skip to content</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-none" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">plumber</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.3.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/introduction.html">Introduction</a></li>
    <li><a class="dropdown-item" href="../articles/quickstart.html">Quickstart</a></li>
    <li><a class="dropdown-item" href="../articles/routing-and-input.html">Routing &amp; Input</a></li>
    <li><a class="dropdown-item" href="../articles/rendering-output.html">Rendering Output</a></li>
    <li><a class="dropdown-item" href="../articles/execution-model.html">Runtime</a></li>
    <li><a class="dropdown-item" href="../articles/security.html">Security</a></li>
    <li><a class="dropdown-item" href="../articles/hosting.html">Hosting</a></li>
    <li><a class="dropdown-item" href="../articles/programmatic-usage.html">Programmatic Usage</a></li>
    <li><a class="dropdown-item" href="../articles/annotations.html">Annotations reference</a></li>
    <li><a class="dropdown-item" href="../articles/tips-and-tricks.html">Tips &amp; Tricks</a></li>
    <li><a class="dropdown-item" href="../articles/migration.html">Migration Guide</a></li>
  </ul></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-news" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">News</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-news"><li><h6 class="dropdown-header" data-toc-skip>Releases</h6></li>
    <li><a class="external-link dropdown-item" href="https://blog.rstudio.com/2021/03/29/plumber-v1-1-0/">Version 1.1.0</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../news/index.html">Changelog</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/rstudio/plumber/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic" id="container">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Package Plumber Router</h1>
      <small class="dont-index">Source: <a href="https://github.com/rstudio/plumber/blob/main/R/plumber.R" class="external-link"><code>R/plumber.R</code></a></small>
      <div class="d-none name"><code>Plumber.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Package Plumber Router</p>
<p>Package Plumber Router</p>
    </div>


    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Routers are the core request handler in <span class="pkg">plumber</span>. A router is responsible for
taking an incoming request, submitting it through the appropriate filters and
eventually to a corresponding endpoint, if one is found.</p>
<p>See the <a href="https://www.rplumber.io/articles/programmatic-usage.html">Programmatic Usage</a> article for additional
details on the methods available on this object.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="pr.html">pr()</a></code>,
<code><a href="pr_run.html">pr_run()</a></code>,
<code><a href="pr_handle.html">pr_get()</a></code>, <code><a href="pr_handle.html">pr_post()</a></code>,
<code><a href="pr_mount.html">pr_mount()</a></code>,
<code><a href="pr_hook.html">pr_hook()</a></code>, <code><a href="pr_hook.html">pr_hooks()</a></code>, <code><a href="pr_cookie.html">pr_cookie()</a></code>,
<code><a href="pr_filter.html">pr_filter()</a></code>,
<code><a href="pr_set_api_spec.html">pr_set_api_spec()</a></code>, <code><a href="pr_set_docs.html">pr_set_docs()</a></code>,
<code><a href="pr_set_serializer.html">pr_set_serializer()</a></code>, <code><a href="pr_set_parsers.html">pr_set_parsers()</a></code>,
<code><a href="pr_set_404.html">pr_set_404()</a></code>, <code><a href="pr_set_error.html">pr_set_error()</a></code>,
<code><a href="pr_set_debug.html">pr_set_debug()</a></code>,
<code><a href="pr_set_docs_callback.html">pr_set_docs_callback()</a></code></p></div>
    </div>
    <div class="section level2">
    <h2 id="super-class">Super class<a class="anchor" aria-label="anchor" href="#super-class"></a></h2>
    <p><code><a href="Hookable.html">plumber::Hookable</a></code> -&gt; <code>Plumber</code></p>
    </div>
    <div class="section level2">
    <h2 id="public-fields">Public fields<a class="anchor" aria-label="anchor" href="#public-fields"></a></h2>
    <p></p><div class="r6-fields"><dl><dt><code>flags</code></dt>
<dd><p>For internal use only</p></dd>


</dl><p></p></div>
    </div>
    <div class="section level2">
    <h2 id="active-bindings">Active bindings<a class="anchor" aria-label="anchor" href="#active-bindings"></a></h2>
    <p></p><div class="r6-active-bindings"><dl><dt><code>endpoints</code></dt>
<dd><p>Plumber router endpoints read-only</p></dd>


<dt><code>filters</code></dt>
<dd><p>Plumber router filters read-only</p></dd>


<dt><code>mounts</code></dt>
<dd><p>Plumber router mounts read-only</p></dd>


<dt><code>environment</code></dt>
<dd><p>Plumber router environment read-only</p></dd>


<dt><code>routes</code></dt>
<dd><p>Plumber router routes read-only</p></dd>


</dl><p></p></div>
    </div>
    <div class="section level2">
    <h2 id="methods">Methods<a class="anchor" aria-label="anchor" href="#methods"></a></h2>

<div class="section">
<h3 id="public-methods">Public methods<a class="anchor" aria-label="anchor" href="#public-methods"></a></h3>

<ul><li><p><a href="#method-Plumber-new"><code>Plumber$new()</code></a></p></li>
<li><p><a href="#method-Plumber-run"><code>Plumber$run()</code></a></p></li>
<li><p><a href="#method-Plumber-mount"><code>Plumber$mount()</code></a></p></li>
<li><p><a href="#method-Plumber-unmount"><code>Plumber$unmount()</code></a></p></li>
<li><p><a href="#method-Plumber-registerHook"><code>Plumber$registerHook()</code></a></p></li>
<li><p><a href="#method-Plumber-handle"><code>Plumber$handle()</code></a></p></li>
<li><p><a href="#method-Plumber-removeHandle"><code>Plumber$removeHandle()</code></a></p></li>
<li><p><a href="#method-Plumber-print"><code>Plumber$print()</code></a></p></li>
<li><p><a href="#method-Plumber-serve"><code>Plumber$serve()</code></a></p></li>
<li><p><a href="#method-Plumber-route"><code>Plumber$route()</code></a></p></li>
<li><p><a href="#method-Plumber-call"><code>Plumber$call()</code></a></p></li>
<li><p><a href="#method-Plumber-onHeaders"><code>Plumber$onHeaders()</code></a></p></li>
<li><p><a href="#method-Plumber-onWSOpen"><code>Plumber$onWSOpen()</code></a></p></li>
<li><p><a href="#method-Plumber-setSerializer"><code>Plumber$setSerializer()</code></a></p></li>
<li><p><a href="#method-Plumber-setParsers"><code>Plumber$setParsers()</code></a></p></li>
<li><p><a href="#method-Plumber-set404Handler"><code>Plumber$set404Handler()</code></a></p></li>
<li><p><a href="#method-Plumber-setErrorHandler"><code>Plumber$setErrorHandler()</code></a></p></li>
<li><p><a href="#method-Plumber-setDocs"><code>Plumber$setDocs()</code></a></p></li>
<li><p><a href="#method-Plumber-setDocsCallback"><code>Plumber$setDocsCallback()</code></a></p></li>
<li><p><a href="#method-Plumber-setDebug"><code>Plumber$setDebug()</code></a></p></li>
<li><p><a href="#method-Plumber-getDebug"><code>Plumber$getDebug()</code></a></p></li>
<li><p><a href="#method-Plumber-filter"><code>Plumber$filter()</code></a></p></li>
<li><p><a href="#method-Plumber-setApiSpec"><code>Plumber$setApiSpec()</code></a></p></li>
<li><p><a href="#method-Plumber-getApiSpec"><code>Plumber$getApiSpec()</code></a></p></li>
<li><p><a href="#method-Plumber-addEndpoint"><code>Plumber$addEndpoint()</code></a></p></li>
<li><p><a href="#method-Plumber-addAssets"><code>Plumber$addAssets()</code></a></p></li>
<li><p><a href="#method-Plumber-addFilter"><code>Plumber$addFilter()</code></a></p></li>
<li><p><a href="#method-Plumber-addGlobalProcessor"><code>Plumber$addGlobalProcessor()</code></a></p></li>
<li><p><a href="#method-Plumber-openAPIFile"><code>Plumber$openAPIFile()</code></a></p></li>
<li><p><a href="#method-Plumber-swaggerFile"><code>Plumber$swaggerFile()</code></a></p></li>
<li><p><a href="#method-Plumber-clone"><code>Plumber$clone()</code></a></p></li>
</ul></div><p><details open><summary>Inherited methods</summary><ul><li><span class="pkg-link" data-pkg="plumber" data-topic="Hookable" data-id="registerHooks"><a href="Hookable.html#method-registerHooks"><code>plumber::Hookable$registerHooks()</code></a></span></li>
</ul></details></p><hr><a id="method-Plumber-new"></a><div class="section">
<h3 id="method-new-">Method <code>new()</code><a class="anchor" aria-label="anchor" href="#method-new-"></a></h3>
<p>Create a new <code>Plumber</code> router</p>
<p>See also <code><a href="plumb.html">plumb()</a></code>, <code><a href="pr.html">pr()</a></code></p><div class="section">
<h4 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va"><a href="../reference/Plumber.html">Plumber</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>file <span class="op">=</span> <span class="cn">NULL</span>, filters <span class="op">=</span> <span class="va">defaultPlumberFilters</span>, <span class="va">envir</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h4>
<p></p><div class="arguments"><dl><dt><code>file</code></dt>
<dd><p>path to file to plumb</p></dd>


<dt><code>filters</code></dt>
<dd><p>a list of Plumber filters</p></dd>


<dt><code>envir</code></dt>
<dd><p>an environment to be used as the enclosure for the routers execution</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="returns">Returns<a class="anchor" aria-label="anchor" href="#returns"></a></h4>
<p>A new <code>Plumber</code> router</p>
</div>

</div><p></p><hr><a id="method-Plumber-run"></a><div class="section">
<h3 id="method-run-">Method <code>run()</code><a class="anchor" aria-label="anchor" href="#method-run-"></a></h3>
<p>Start a server using <code>Plumber</code> object.</p>
<p>See also: <code><a href="pr_run.html">pr_run()</a></code></p><div class="section">
<h4 id="usage-1">Usage<a class="anchor" aria-label="anchor" href="#usage-1"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">Plumber</span><span class="op">$</span><span class="fu">run</span><span class="op">(</span></span>
<span>  host <span class="op">=</span> <span class="st">"127.0.0.1"</span>,</span>
<span>  port <span class="op">=</span> <span class="fu"><a href="../reference/options_plumber.html">get_option_or_env</a></span><span class="op">(</span><span class="st">"plumber.port"</span>, <span class="cn">NULL</span><span class="op">)</span>,</span>
<span>  swagger <span class="op">=</span> <span class="fu">deprecated</span><span class="op">(</span><span class="op">)</span>,</span>
<span>  debug <span class="op">=</span> <span class="fu">missing_arg</span><span class="op">(</span><span class="op">)</span>,</span>
<span>  swaggerCallback <span class="op">=</span> <span class="fu">missing_arg</span><span class="op">(</span><span class="op">)</span>,</span>
<span>  <span class="va">...</span>,</span>
<span>  docs <span class="op">=</span> <span class="fu">missing_arg</span><span class="op">(</span><span class="op">)</span>,</span>
<span>  quiet <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-1">Arguments<a class="anchor" aria-label="anchor" href="#arguments-1"></a></h4>
<p></p><div class="arguments"><dl><dt><code>host</code></dt>
<dd><p>a string that is a valid IPv4 or IPv6 address that is owned by
this server, which the application will listen on. "0.0.0.0" represents
all IPv4 addresses and "::/0" represents all IPv6 addresses.</p></dd>


<dt><code>port</code></dt>
<dd><p>a number or integer that indicates the server port that should
be listened on. Note that on most Unix-like systems including Linux and
Mac OS X, port numbers smaller than 1025 require root privileges.</p>
<p>This value does not need to be explicitly assigned. To explicitly set it, see <code><a href="options_plumber.html">options_plumber()</a></code>.</p></dd>


<dt><code>swagger</code></dt>
<dd><p>Deprecated. Please use <code>docs</code> instead. See <code>$setDocs(docs)</code> or <code>$setApiSpec()</code> for more customization.</p></dd>


<dt><code>debug</code></dt>
<dd><p>If <code>TRUE</code>, it will provide more insight into your API errors. Using this value will only last for the duration of the run. If a <code>$setDebug()</code> has not been called, <code>debug</code> will default to <code>FALSE</code> at <code>$run()</code> time. See <code>$setDebug()</code> for more details.</p></dd>


<dt><code>swaggerCallback</code></dt>
<dd><p>An optional single-argument function that is
called back with the URL to an OpenAPI user interface when one becomes
ready. If missing, defaults to information previously set with <code>$setDocsCallback()</code>.
This value will only be used while running the router.</p></dd>


<dt><code>...</code></dt>
<dd><p>Should be empty.</p></dd>


<dt><code>docs</code></dt>
<dd><p>Visual documentation value to use while running the API.
This value will only be used while running the router.
If missing, defaults to information previously set with <code>setDocs()</code>.
For more customization, see <code>$setDocs()</code> or <code><a href="pr_set_docs.html">pr_set_docs()</a></code> for examples.</p></dd>


<dt><code>quiet</code></dt>
<dd><p>If <code>TRUE</code>, don't print routine startup messages.</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-Plumber-mount"></a><div class="section">
<h3 id="method-mount-">Method <code>mount()</code><a class="anchor" aria-label="anchor" href="#method-mount-"></a></h3>
<p>Mount a Plumber router</p>
<p>Plumber routers can be “nested” by mounting one into another
using the <code>mount()</code> method. This allows you to compartmentalize your API
by paths which is a great technique for decomposing large APIs into smaller files.</p>
<p>See also: <code><a href="pr_mount.html">pr_mount()</a></code></p><div class="section">
<h4 id="usage-2">Usage<a class="anchor" aria-label="anchor" href="#usage-2"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">Plumber</span><span class="op">$</span><span class="fu">mount</span><span class="op">(</span><span class="va">path</span>, <span class="va">router</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-2">Arguments<a class="anchor" aria-label="anchor" href="#arguments-2"></a></h4>
<p></p><div class="arguments"><dl><dt><code>path</code></dt>
<dd><p>a character string. Where to mount router.</p></dd>


<dt><code>router</code></dt>
<dd><p>a Plumber router. Router to be mounted.</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="examples">Examples<a class="anchor" aria-label="anchor" href="#examples"></a></h4>
<p></p><div class="r example copy"><div class="sourceCode"><pre><code>\dontrun{
root &lt;- pr()

users &lt;- Plumber$new("users.R")
root$mount("/users", users)

products &lt;- Plumber$new("products.R")
root$mount("/products", products)
}
</code></pre></div><p></p></div>
</div>


</div><p></p><hr><a id="method-Plumber-unmount"></a><div class="section">
<h3 id="method-unmount-">Method <code>unmount()</code><a class="anchor" aria-label="anchor" href="#method-unmount-"></a></h3>
<p>Unmount a Plumber router</p><div class="section">
<h4 id="usage-3">Usage<a class="anchor" aria-label="anchor" href="#usage-3"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">Plumber</span><span class="op">$</span><span class="fu">unmount</span><span class="op">(</span><span class="va">path</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-3">Arguments<a class="anchor" aria-label="anchor" href="#arguments-3"></a></h4>
<p></p><div class="arguments"><dl><dt><code>path</code></dt>
<dd><p>a character string. Where to unmount router.</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-Plumber-registerHook"></a><div class="section">
<h3 id="method-registerhook-">Method <code>registerHook()</code><a class="anchor" aria-label="anchor" href="#method-registerhook-"></a></h3>
<p>Register a hook</p>
<p>Plumber routers support the notion of "hooks" that can be registered
to execute some code at a particular point in the lifecycle of a request.
Plumber routers currently support four hooks:</p><ol><li><p><code>preroute(data, req, res)</code></p></li>
<li><p><code>postroute(data, req, res, value)</code></p></li>
<li><p><code>preserialize(data, req, res, value)</code></p></li>
<li><p><code>postserialize(data, req, res, value)</code></p></li>
</ol><p>In all of the above you have access to a disposable environment in the <code>data</code>
parameter that is created as a temporary data store for each request. Hooks
can store temporary data in these hooks that can be reused by other hooks
processing this same request.</p>
<p>One feature when defining hooks in Plumber routers is the ability to modify
the returned value. The convention for such hooks is: any function that accepts
a parameter named <code>value</code> is expected to return the new value. This could
be an unmodified version of the value that was passed in, or it could be a
mutated value. But in either case, if your hook accepts a parameter
named <code>value</code>, whatever your hook returns will be used as the new value
for the response.</p>
<p>You can add hooks using the <code>registerHook</code> method, or you can add multiple
hooks at once using the <code>registerHooks</code> method which takes a name list in
which the names are the names of the hooks, and the values are the
handlers themselves.</p>
<p>See also: <code><a href="pr_hook.html">pr_hook()</a></code>, <code><a href="pr_hook.html">pr_hooks()</a></code></p><div class="section">
<h4 id="usage-4">Usage<a class="anchor" aria-label="anchor" href="#usage-4"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">Plumber</span><span class="op">$</span><span class="fu">registerHook</span><span class="op">(</span></span>
<span>  stage <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"preroute"</span>, <span class="st">"postroute"</span>, <span class="st">"preserialize"</span>, <span class="st">"postserialize"</span>, <span class="st">"exit"</span><span class="op">)</span>,</span>
<span>  <span class="va">handler</span></span>
<span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-4">Arguments<a class="anchor" aria-label="anchor" href="#arguments-4"></a></h4>
<p></p><div class="arguments"><dl><dt><code>stage</code></dt>
<dd><p>a character string. Point in the lifecycle of a request.</p></dd>


<dt><code>handler</code></dt>
<dd><p>a hook function.</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="examples-1">Examples<a class="anchor" aria-label="anchor" href="#examples-1"></a></h4>
<p></p><div class="r example copy"><div class="sourceCode"><pre><code>\dontrun{
pr &lt;- pr()
pr$registerHook("preroute", function(req){
  cat("Routing a request for", req$PATH_INFO, "...\n")
})
pr$registerHooks(list(
  preserialize=function(req, value){
    print("About to serialize this value:")
    print(value)

    # Must return the value since we took one in. Here we're not choosing
    # to mutate it, but we could.
    value
  },
  postserialize=function(res){
    print("We serialized the value as:")
    print(res$body)
  }
))

pr$handle("GET", "/", function(){ 123 })
}
</code></pre></div><p></p></div>
</div>


</div><p></p><hr><a id="method-Plumber-handle"></a><div class="section">
<h3 id="method-handle-">Method <code>handle()</code><a class="anchor" aria-label="anchor" href="#method-handle-"></a></h3>
<p>Define endpoints</p>
<p>The “handler” functions that you define in these handle calls
are identical to the code you would have defined in your plumber.R file
if you were using annotations to define your API. The handle() method
takes additional arguments that allow you to control nuanced behavior
of the endpoint like which filter it might preempt or which serializer
it should use.</p>
<p>See also: <code><a href="pr_handle.html">pr_handle()</a></code>, <code><a href="pr_handle.html">pr_get()</a></code>, <code><a href="pr_handle.html">pr_post()</a></code>, <code><a href="pr_handle.html">pr_put()</a></code>, <code><a href="pr_handle.html">pr_delete()</a></code></p><div class="section">
<h4 id="usage-5">Usage<a class="anchor" aria-label="anchor" href="#usage-5"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">Plumber</span><span class="op">$</span><span class="fu">handle</span><span class="op">(</span></span>
<span>  <span class="va">methods</span>,</span>
<span>  <span class="va">path</span>,</span>
<span>  <span class="va">handler</span>,</span>
<span>  <span class="va">preempt</span>,</span>
<span>  <span class="va">serializer</span>,</span>
<span>  <span class="va">parsers</span>,</span>
<span>  <span class="va">endpoint</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-5">Arguments<a class="anchor" aria-label="anchor" href="#arguments-5"></a></h4>
<p></p><div class="arguments"><dl><dt><code>methods</code></dt>
<dd><p>a character string. http method.</p></dd>


<dt><code>path</code></dt>
<dd><p>a character string. Api endpoints</p></dd>


<dt><code>handler</code></dt>
<dd><p>a handler function.</p></dd>


<dt><code>preempt</code></dt>
<dd><p>a preempt function.</p></dd>


<dt><code>serializer</code></dt>
<dd><p>a serializer function.</p></dd>


<dt><code>parsers</code></dt>
<dd><p>a named list of parsers.</p></dd>


<dt><code>endpoint</code></dt>
<dd><p>a <code>PlumberEndpoint</code> object.</p></dd>


<dt><code>...</code></dt>
<dd><p>additional arguments for <a href="PlumberEndpoint.html">PlumberEndpoint</a> <code>new</code> method (namely <code>lines</code>, <code>params</code>, <code>comments</code>, <code>responses</code> and <code>tags</code>. Excludes <code>envir</code>).</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="examples-2">Examples<a class="anchor" aria-label="anchor" href="#examples-2"></a></h4>
<p></p><div class="r example copy"><div class="sourceCode"><pre><code>\dontrun{
pr &lt;- pr()
pr$handle("GET", "/", function(){
  "&lt;html&gt;&lt;h1&gt;Programmatic Plumber!&lt;/h1&gt;&lt;/html&gt;"
}, serializer=plumber::serializer_html())
}
</code></pre></div><p></p></div>
</div>


</div><p></p><hr><a id="method-Plumber-removeHandle"></a><div class="section">
<h3 id="method-removehandle-">Method <code>removeHandle()</code><a class="anchor" aria-label="anchor" href="#method-removehandle-"></a></h3>
<p>Remove endpoints</p><div class="section">
<h4 id="usage-6">Usage<a class="anchor" aria-label="anchor" href="#usage-6"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">Plumber</span><span class="op">$</span><span class="fu">removeHandle</span><span class="op">(</span><span class="va">methods</span>, <span class="va">path</span>, preempt <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-6">Arguments<a class="anchor" aria-label="anchor" href="#arguments-6"></a></h4>
<p></p><div class="arguments"><dl><dt><code>methods</code></dt>
<dd><p>a character string. http method.</p></dd>


<dt><code>path</code></dt>
<dd><p>a character string. Api endpoints</p></dd>


<dt><code>preempt</code></dt>
<dd><p>a preempt function.</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-Plumber-print"></a><div class="section">
<h3 id="method-print-">Method <code><a href="https://rdrr.io/r/base/print.html" class="external-link">print()</a></code><a class="anchor" aria-label="anchor" href="#method-print-"></a></h3>
<p>Print representation of plumber router.</p><div class="section">
<h4 id="usage-7">Usage<a class="anchor" aria-label="anchor" href="#usage-7"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">Plumber</span><span class="op">$</span><span class="fu">print</span><span class="op">(</span>prefix <span class="op">=</span> <span class="st">""</span>, topLevel <span class="op">=</span> <span class="cn">TRUE</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-7">Arguments<a class="anchor" aria-label="anchor" href="#arguments-7"></a></h4>
<p></p><div class="arguments"><dl><dt><code>prefix</code></dt>
<dd><p>a character string. Prefix to append to representation.</p></dd>


<dt><code>topLevel</code></dt>
<dd><p>a logical value. When method executed on top level
router, set to <code>TRUE</code>.</p></dd>


<dt><code>...</code></dt>
<dd><p>additional arguments for recursive calls</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="returns-1">Returns<a class="anchor" aria-label="anchor" href="#returns-1"></a></h4>
<p>A terminal friendly representation of a plumber router.</p>
</div>

</div><p></p><hr><a id="method-Plumber-serve"></a><div class="section">
<h3 id="method-serve-">Method <code>serve()</code><a class="anchor" aria-label="anchor" href="#method-serve-"></a></h3>
<p>Serve a request</p><div class="section">
<h4 id="usage-8">Usage<a class="anchor" aria-label="anchor" href="#usage-8"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">Plumber</span><span class="op">$</span><span class="fu">serve</span><span class="op">(</span><span class="va">req</span>, <span class="va">res</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-8">Arguments<a class="anchor" aria-label="anchor" href="#arguments-8"></a></h4>
<p></p><div class="arguments"><dl><dt><code>req</code></dt>
<dd><p>request object</p></dd>


<dt><code>res</code></dt>
<dd><p>response object</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-Plumber-route"></a><div class="section">
<h3 id="method-route-">Method <code>route()</code><a class="anchor" aria-label="anchor" href="#method-route-"></a></h3>
<p>Route a request</p><div class="section">
<h4 id="usage-9">Usage<a class="anchor" aria-label="anchor" href="#usage-9"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">Plumber</span><span class="op">$</span><span class="fu">route</span><span class="op">(</span><span class="va">req</span>, <span class="va">res</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-9">Arguments<a class="anchor" aria-label="anchor" href="#arguments-9"></a></h4>
<p></p><div class="arguments"><dl><dt><code>req</code></dt>
<dd><p>request object</p></dd>


<dt><code>res</code></dt>
<dd><p>response object</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-Plumber-call"></a><div class="section">
<h3 id="method-call-">Method <code><a href="https://rdrr.io/r/base/call.html" class="external-link">call()</a></code><a class="anchor" aria-label="anchor" href="#method-call-"></a></h3>
<p><span class="pkg">httpuv</span> interface call function. (Required for <span class="pkg">httpuv</span>)</p><div class="section">
<h4 id="usage-10">Usage<a class="anchor" aria-label="anchor" href="#usage-10"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">Plumber</span><span class="op">$</span><span class="fu">call</span><span class="op">(</span><span class="va">req</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-10">Arguments<a class="anchor" aria-label="anchor" href="#arguments-10"></a></h4>
<p></p><div class="arguments"><dl><dt><code>req</code></dt>
<dd><p>request object</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-Plumber-onHeaders"></a><div class="section">
<h3 id="method-onheaders-">Method <code>onHeaders()</code><a class="anchor" aria-label="anchor" href="#method-onheaders-"></a></h3>
<p>httpuv interface onHeaders function. (Required for <span class="pkg">httpuv</span>)</p><div class="section">
<h4 id="usage-11">Usage<a class="anchor" aria-label="anchor" href="#usage-11"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">Plumber</span><span class="op">$</span><span class="fu">onHeaders</span><span class="op">(</span><span class="va">req</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-11">Arguments<a class="anchor" aria-label="anchor" href="#arguments-11"></a></h4>
<p></p><div class="arguments"><dl><dt><code>req</code></dt>
<dd><p>request object</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-Plumber-onWSOpen"></a><div class="section">
<h3 id="method-onwsopen-">Method <code>onWSOpen()</code><a class="anchor" aria-label="anchor" href="#method-onwsopen-"></a></h3>
<p>httpuv interface onWSOpen function. (Required for <span class="pkg">httpuv</span>)</p><div class="section">
<h4 id="usage-12">Usage<a class="anchor" aria-label="anchor" href="#usage-12"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">Plumber</span><span class="op">$</span><span class="fu">onWSOpen</span><span class="op">(</span><span class="va">ws</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-12">Arguments<a class="anchor" aria-label="anchor" href="#arguments-12"></a></h4>
<p></p><div class="arguments"><dl><dt><code>ws</code></dt>
<dd><p>WebSocket object</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-Plumber-setSerializer"></a><div class="section">
<h3 id="method-setserializer-">Method <code>setSerializer()</code><a class="anchor" aria-label="anchor" href="#method-setserializer-"></a></h3>
<p>Sets the default serializer of the router.</p>
<p>See also: <code><a href="pr_set_serializer.html">pr_set_serializer()</a></code></p><div class="section">
<h4 id="usage-13">Usage<a class="anchor" aria-label="anchor" href="#usage-13"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">Plumber</span><span class="op">$</span><span class="fu">setSerializer</span><span class="op">(</span><span class="va">serializer</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-13">Arguments<a class="anchor" aria-label="anchor" href="#arguments-13"></a></h4>
<p></p><div class="arguments"><dl><dt><code>serializer</code></dt>
<dd><p>a serializer function</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="examples-3">Examples<a class="anchor" aria-label="anchor" href="#examples-3"></a></h4>
<p></p><div class="r example copy"><div class="sourceCode"><pre><code>\dontrun{
pr &lt;- pr()
pr$setSerializer(serializer_unboxed_json())
}
</code></pre></div><p></p></div>
</div>


</div><p></p><hr><a id="method-Plumber-setParsers"></a><div class="section">
<h3 id="method-setparsers-">Method <code>setParsers()</code><a class="anchor" aria-label="anchor" href="#method-setparsers-"></a></h3>
<p>Sets the default parsers of the router. Initialized to <code>c("json", "form", "text", "octet", "multi")</code></p><div class="section">
<h4 id="usage-14">Usage<a class="anchor" aria-label="anchor" href="#usage-14"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">Plumber</span><span class="op">$</span><span class="fu">setParsers</span><span class="op">(</span><span class="va">parsers</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-14">Arguments<a class="anchor" aria-label="anchor" href="#arguments-14"></a></h4>
<p></p><div class="arguments"><dl><dt><code>parsers</code></dt>
<dd><p>Can be one of:</p><ul><li><p>A <code>NULL</code> value</p></li>
<li><p>A character vector of parser names</p></li>
<li><p>A named <code><a href="https://rdrr.io/r/base/list.html" class="external-link">list()</a></code> whose keys are parser names names and values are arguments to be applied with <code><a href="https://rdrr.io/r/base/do.call.html" class="external-link">do.call()</a></code></p></li>
<li><p>A <code>TRUE</code> value, which will default to combining all parsers. This is great for seeing what is possible, but not great for security purposes</p></li>
</ul><p>If the parser name <code>"all"</code> is found in any character value or list name, all remaining parsers will be added.
When using a list, parser information already defined will maintain their existing argument values.  All remaining parsers will use their default arguments.</p>
<p>Example:</p>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="co"># provide a character string</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a>parsers <span class="ot">=</span> <span class="st">"json"</span></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a><span class="co"># provide a named list with no arguments</span></span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a>parsers <span class="ot">=</span> <span class="fu">list</span>(<span class="at">json =</span> <span class="fu">list</span>())</span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a></span>
<span id="cb1-7"><a href="#cb1-7" tabindex="-1"></a><span class="co"># provide a named list with arguments; include `rds`</span></span>
<span id="cb1-8"><a href="#cb1-8" tabindex="-1"></a>parsers <span class="ot">=</span> <span class="fu">list</span>(<span class="at">json =</span> <span class="fu">list</span>(<span class="at">simplifyVector =</span> <span class="cn">FALSE</span>), <span class="at">rds =</span> <span class="fu">list</span>())</span>
<span id="cb1-9"><a href="#cb1-9" tabindex="-1"></a></span>
<span id="cb1-10"><a href="#cb1-10" tabindex="-1"></a><span class="co"># default plumber parsers</span></span>
<span id="cb1-11"><a href="#cb1-11" tabindex="-1"></a>parsers <span class="ot">=</span> <span class="fu">c</span>(<span class="st">"json"</span>, <span class="st">"form"</span>, <span class="st">"text"</span>, <span class="st">"octet"</span>, <span class="st">"multi"</span>)</span></code></pre><p></p></div></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-Plumber-set404Handler"></a><div class="section">
<h3 id="method-set-handler-">Method <code>set404Handler()</code><a class="anchor" aria-label="anchor" href="#method-set-handler-"></a></h3>
<p>Sets the handler that gets called if an
incoming request can’t be served by any filter, endpoint, or sub-router.</p>
<p>See also: <code><a href="pr_set_404.html">pr_set_404()</a></code></p><div class="section">
<h4 id="usage-15">Usage<a class="anchor" aria-label="anchor" href="#usage-15"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">Plumber</span><span class="op">$</span><span class="fu">set404Handler</span><span class="op">(</span><span class="va">fun</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-15">Arguments<a class="anchor" aria-label="anchor" href="#arguments-15"></a></h4>
<p></p><div class="arguments"><dl><dt><code>fun</code></dt>
<dd><p>a handler function.</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="examples-4">Examples<a class="anchor" aria-label="anchor" href="#examples-4"></a></h4>
<p></p><div class="r example copy"><div class="sourceCode"><pre><code>\dontrun{
pr &lt;- pr()
pr$set404Handler(function(req, res) {cat(req$PATH_INFO)})
}
</code></pre></div><p></p></div>
</div>


</div><p></p><hr><a id="method-Plumber-setErrorHandler"></a><div class="section">
<h3 id="method-seterrorhandler-">Method <code>setErrorHandler()</code><a class="anchor" aria-label="anchor" href="#method-seterrorhandler-"></a></h3>
<p>Sets the error handler which gets invoked if any filter or
endpoint generates an error.</p>
<p>See also: <code><a href="pr_set_404.html">pr_set_404()</a></code></p><div class="section">
<h4 id="usage-16">Usage<a class="anchor" aria-label="anchor" href="#usage-16"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">Plumber</span><span class="op">$</span><span class="fu">setErrorHandler</span><span class="op">(</span><span class="va">fun</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-16">Arguments<a class="anchor" aria-label="anchor" href="#arguments-16"></a></h4>
<p></p><div class="arguments"><dl><dt><code>fun</code></dt>
<dd><p>a handler function.</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="examples-5">Examples<a class="anchor" aria-label="anchor" href="#examples-5"></a></h4>
<p></p><div class="r example copy"><div class="sourceCode"><pre><code>\dontrun{
pr &lt;- pr()
pr$setErrorHandler(function(req, res, err) {
  message("Found error: ")
  str(err)
})
}
</code></pre></div><p></p></div>
</div>


</div><p></p><hr><a id="method-Plumber-setDocs"></a><div class="section">
<h3 id="method-setdocs-">Method <code>setDocs()</code><a class="anchor" aria-label="anchor" href="#method-setdocs-"></a></h3>
<p>Set visual documentation to use for API</p>
<p>See also: <code><a href="pr_set_docs.html">pr_set_docs()</a></code>, <code><a href="register_docs.html">register_docs()</a></code>, <code><a href="register_docs.html">registered_docs()</a></code></p><div class="section">
<h4 id="usage-17">Usage<a class="anchor" aria-label="anchor" href="#usage-17"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">Plumber</span><span class="op">$</span><span class="fu">setDocs</span><span class="op">(</span>docs <span class="op">=</span> <span class="fu"><a href="../reference/options_plumber.html">get_option_or_env</a></span><span class="op">(</span><span class="st">"plumber.docs"</span>, <span class="cn">TRUE</span><span class="op">)</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-17">Arguments<a class="anchor" aria-label="anchor" href="#arguments-17"></a></h4>
<p></p><div class="arguments"><dl><dt><code>docs</code></dt>
<dd><p>a character value or a logical value. See <code><a href="pr_set_docs.html">pr_set_docs()</a></code> for examples.
If using <code><a href="options_plumber.html">options_plumber()</a></code>, the value must be set before initializing your Plumber router.</p></dd>


<dt><code>...</code></dt>
<dd><p>Arguments for the visual documentation. See each visual documentation package for further details.</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-Plumber-setDocsCallback"></a><div class="section">
<h3 id="method-setdocscallback-">Method <code>setDocsCallback()</code><a class="anchor" aria-label="anchor" href="#method-setdocscallback-"></a></h3>
<p>Set a callback to notify where the API's visual documentation is located.</p>
<p>When set, it will be called with a character string corresponding
to the API docs url. This allows RStudio to locate visual documentation.</p>
<p>If using <code><a href="options_plumber.html">options_plumber()</a></code>, the value must be set before initializing your Plumber router.</p>
<p>See also: <code><a href="pr_set_docs_callback.html">pr_set_docs_callback()</a></code></p><div class="section">
<h4 id="usage-18">Usage<a class="anchor" aria-label="anchor" href="#usage-18"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">Plumber</span><span class="op">$</span><span class="fu">setDocsCallback</span><span class="op">(</span></span>
<span>  callback <span class="op">=</span> <span class="fu"><a href="../reference/options_plumber.html">get_option_or_env</a></span><span class="op">(</span><span class="st">"plumber.docs.callback"</span>, <span class="cn">NULL</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-18">Arguments<a class="anchor" aria-label="anchor" href="#arguments-18"></a></h4>
<p></p><div class="arguments"><dl><dt><code>callback</code></dt>
<dd><p>a callback function for taking action on the docs url. (Also accepts <code>NULL</code> values to disable the <code>callback</code>.)</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-Plumber-setDebug"></a><div class="section">
<h3 id="method-setdebug-">Method <code>setDebug()</code><a class="anchor" aria-label="anchor" href="#method-setdebug-"></a></h3>
<p>Set debug value to include error messages.</p>
<p>See also: <code>$getDebug()</code> and <code><a href="pr_set_debug.html">pr_set_debug()</a></code></p><div class="section">
<h4 id="usage-19">Usage<a class="anchor" aria-label="anchor" href="#usage-19"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">Plumber</span><span class="op">$</span><span class="fu">setDebug</span><span class="op">(</span>debug <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-19">Arguments<a class="anchor" aria-label="anchor" href="#arguments-19"></a></h4>
<p></p><div class="arguments"><dl><dt><code>debug</code></dt>
<dd><p><code>TRUE</code> provides more insight into your API errors.</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-Plumber-getDebug"></a><div class="section">
<h3 id="method-getdebug-">Method <code>getDebug()</code><a class="anchor" aria-label="anchor" href="#method-getdebug-"></a></h3>
<p>Retrieve the <code>debug</code> value. If it has never been set, it will return <code>FALSE</code>.</p>
<p>See also: <code>$getDebug()</code> and <code><a href="pr_set_debug.html">pr_set_debug()</a></code></p><div class="section">
<h4 id="usage-20">Usage<a class="anchor" aria-label="anchor" href="#usage-20"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">Plumber</span><span class="op">$</span><span class="fu">getDebug</span><span class="op">(</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>


</div><p></p><hr><a id="method-Plumber-filter"></a><div class="section">
<h3 id="method-filter-">Method <code><a href="https://rdrr.io/r/stats/filter.html" class="external-link">filter()</a></code><a class="anchor" aria-label="anchor" href="#method-filter-"></a></h3>
<p>Add a filter to plumber router</p>
<p>See also: <code><a href="pr_filter.html">pr_filter()</a></code></p><div class="section">
<h4 id="usage-21">Usage<a class="anchor" aria-label="anchor" href="#usage-21"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">Plumber</span><span class="op">$</span><span class="fu">filter</span><span class="op">(</span><span class="va">name</span>, <span class="va">expr</span>, <span class="va">serializer</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-20">Arguments<a class="anchor" aria-label="anchor" href="#arguments-20"></a></h4>
<p></p><div class="arguments"><dl><dt><code>name</code></dt>
<dd><p>a character string. Name of filter</p></dd>


<dt><code>expr</code></dt>
<dd><p>an expr that resolve to a filter function or a filter function</p></dd>


<dt><code>serializer</code></dt>
<dd><p>a serializer function</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-Plumber-setApiSpec"></a><div class="section">
<h3 id="method-setapispec-">Method <code>setApiSpec()</code><a class="anchor" aria-label="anchor" href="#method-setapispec-"></a></h3>
<p>Allows to modify router autogenerated OpenAPI Specification</p>
<p>Note, the returned value will be sent through <code><a href="serializers.html">serializer_unboxed_json()</a></code> which will turn all length 1 vectors into atomic values.
To force a vector to serialize to an array of size 1, be sure to call <code><a href="https://rdrr.io/r/base/list.html" class="external-link">as.list()</a></code> on your value. <code><a href="https://rdrr.io/r/base/list.html" class="external-link">list()</a></code> objects are always serialized to an array value.</p>
<p>See also: <code><a href="pr_set_api_spec.html">pr_set_api_spec()</a></code></p><div class="section">
<h4 id="usage-22">Usage<a class="anchor" aria-label="anchor" href="#usage-22"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">Plumber</span><span class="op">$</span><span class="fu">setApiSpec</span><span class="op">(</span>api <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-21">Arguments<a class="anchor" aria-label="anchor" href="#arguments-21"></a></h4>
<p></p><div class="arguments"><dl><dt><code>api</code></dt>
<dd><p>This can be</p><ul><li><p>an OpenAPI Specification formatted list object</p></li>
<li><p>a function that accepts the OpenAPI Specification autogenerated by <code>plumber</code> and returns a OpenAPI Specification formatted list object.</p></li>
<li><p>a path to an OpenAPI Specification</p></li>
</ul><p>The value returned will not be validated for OAS compatibility.</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-Plumber-getApiSpec"></a><div class="section">
<h3 id="method-getapispec-">Method <code>getApiSpec()</code><a class="anchor" aria-label="anchor" href="#method-getapispec-"></a></h3>
<p>Retrieve OpenAPI file</p><div class="section">
<h4 id="usage-23">Usage<a class="anchor" aria-label="anchor" href="#usage-23"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">Plumber</span><span class="op">$</span><span class="fu">getApiSpec</span><span class="op">(</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>


</div><p></p><hr><a id="method-Plumber-addEndpoint"></a><div class="section">
<h3 id="method-addendpoint-">Method <code>addEndpoint()</code><a class="anchor" aria-label="anchor" href="#method-addendpoint-"></a></h3>
<p>addEndpoint has been deprecated in v0.4.0 and will be removed in a coming release. Please use <code>handle()</code> instead.</p><div class="section">
<h4 id="usage-24">Usage<a class="anchor" aria-label="anchor" href="#usage-24"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">Plumber</span><span class="op">$</span><span class="fu">addEndpoint</span><span class="op">(</span></span>
<span>  <span class="va">verbs</span>,</span>
<span>  <span class="va">path</span>,</span>
<span>  <span class="va">expr</span>,</span>
<span>  <span class="va">serializer</span>,</span>
<span>  <span class="va">processors</span>,</span>
<span>  preempt <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  params <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">comments</span></span>
<span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-22">Arguments<a class="anchor" aria-label="anchor" href="#arguments-22"></a></h4>
<p></p><div class="arguments"><dl><dt><code>verbs</code></dt>
<dd><p>verbs</p></dd>


<dt><code>path</code></dt>
<dd><p>path</p></dd>


<dt><code>expr</code></dt>
<dd><p>expr</p></dd>


<dt><code>serializer</code></dt>
<dd><p>serializer</p></dd>


<dt><code>processors</code></dt>
<dd><p>processors</p></dd>


<dt><code>preempt</code></dt>
<dd><p>preempt</p></dd>


<dt><code>params</code></dt>
<dd><p>params</p></dd>


<dt><code>comments</code></dt>
<dd><p>comments</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-Plumber-addAssets"></a><div class="section">
<h3 id="method-addassets-">Method <code>addAssets()</code><a class="anchor" aria-label="anchor" href="#method-addassets-"></a></h3>
<p>addAssets has been deprecated in v0.4.0 and will be removed in a coming release. Please use <code>mount</code> and <code>PlumberStatic$new()</code> instead.</p><div class="section">
<h4 id="usage-25">Usage<a class="anchor" aria-label="anchor" href="#usage-25"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">Plumber</span><span class="op">$</span><span class="fu">addAssets</span><span class="op">(</span><span class="va">dir</span>, path <span class="op">=</span> <span class="st">"/public"</span>, options <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-23">Arguments<a class="anchor" aria-label="anchor" href="#arguments-23"></a></h4>
<p></p><div class="arguments"><dl><dt><code>dir</code></dt>
<dd><p>dir</p></dd>


<dt><code>path</code></dt>
<dd><p>path</p></dd>


<dt><code>options</code></dt>
<dd><p>options</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-Plumber-addFilter"></a><div class="section">
<h3 id="method-addfilter-">Method <code>addFilter()</code><a class="anchor" aria-label="anchor" href="#method-addfilter-"></a></h3>
<p><code>$addFilter()</code> has been deprecated in v0.4.0 and will be removed in a coming release. Please use <code>$filter()</code> instead.</p><div class="section">
<h4 id="usage-26">Usage<a class="anchor" aria-label="anchor" href="#usage-26"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">Plumber</span><span class="op">$</span><span class="fu">addFilter</span><span class="op">(</span><span class="va">name</span>, <span class="va">expr</span>, <span class="va">serializer</span>, <span class="va">processors</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-24">Arguments<a class="anchor" aria-label="anchor" href="#arguments-24"></a></h4>
<p></p><div class="arguments"><dl><dt><code>name</code></dt>
<dd><p>name</p></dd>


<dt><code>expr</code></dt>
<dd><p>expr</p></dd>


<dt><code>serializer</code></dt>
<dd><p>serializer</p></dd>


<dt><code>processors</code></dt>
<dd><p>processors</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-Plumber-addGlobalProcessor"></a><div class="section">
<h3 id="method-addglobalprocessor-">Method <code>addGlobalProcessor()</code><a class="anchor" aria-label="anchor" href="#method-addglobalprocessor-"></a></h3>
<p><code>$addGlobalProcessor()</code> has been deprecated in v0.4.0 and will be removed in a coming release. Please use <code>$registerHook</code>(s) instead.</p><div class="section">
<h4 id="usage-27">Usage<a class="anchor" aria-label="anchor" href="#usage-27"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">Plumber</span><span class="op">$</span><span class="fu">addGlobalProcessor</span><span class="op">(</span><span class="va">proc</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-25">Arguments<a class="anchor" aria-label="anchor" href="#arguments-25"></a></h4>
<p></p><div class="arguments"><dl><dt><code>proc</code></dt>
<dd><p>proc</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-Plumber-openAPIFile"></a><div class="section">
<h3 id="method-openapifile-">Method <code>openAPIFile()</code><a class="anchor" aria-label="anchor" href="#method-openapifile-"></a></h3>
<p>Deprecated. Retrieve OpenAPI file</p><div class="section">
<h4 id="usage-28">Usage<a class="anchor" aria-label="anchor" href="#usage-28"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">Plumber</span><span class="op">$</span><span class="fu">openAPIFile</span><span class="op">(</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>


</div><p></p><hr><a id="method-Plumber-swaggerFile"></a><div class="section">
<h3 id="method-swaggerfile-">Method <code>swaggerFile()</code><a class="anchor" aria-label="anchor" href="#method-swaggerfile-"></a></h3>
<p>Deprecated. Retrieve OpenAPI file</p><div class="section">
<h4 id="usage-29">Usage<a class="anchor" aria-label="anchor" href="#usage-29"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">Plumber</span><span class="op">$</span><span class="fu">swaggerFile</span><span class="op">(</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>


</div><p></p><hr><a id="method-Plumber-clone"></a><div class="section">
<h3 id="method-clone-">Method <code>clone()</code><a class="anchor" aria-label="anchor" href="#method-clone-"></a></h3>
<p>The objects of this class are cloneable with this method.</p><div class="section">
<h4 id="usage-30">Usage<a class="anchor" aria-label="anchor" href="#usage-30"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">Plumber</span><span class="op">$</span><span class="fu">clone</span><span class="op">(</span>deep <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-26">Arguments<a class="anchor" aria-label="anchor" href="#arguments-26"></a></h4>
<p></p><div class="arguments"><dl><dt><code>deep</code></dt>
<dd><p>Whether to make a deep clone.</p></dd>


</dl><p></p></div>
</div>

</div>

    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## ------------------------------------------------</span></span></span>
<span class="r-in"><span><span class="co">## Method `Plumber$mount`</span></span></span>
<span class="r-in"><span><span class="co">## ------------------------------------------------</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="va">root</span> <span class="op">&lt;-</span> <span class="fu"><a href="pr.html">pr</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">users</span> <span class="op">&lt;-</span> <span class="va">Plumber</span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="st">"users.R"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">root</span><span class="op">$</span><span class="fu">mount</span><span class="op">(</span><span class="st">"/users"</span>, <span class="va">users</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">products</span> <span class="op">&lt;-</span> <span class="va">Plumber</span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="st">"products.R"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">root</span><span class="op">$</span><span class="fu">mount</span><span class="op">(</span><span class="st">"/products"</span>, <span class="va">products</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## ------------------------------------------------</span></span></span>
<span class="r-in"><span><span class="co">## Method `Plumber$registerHook`</span></span></span>
<span class="r-in"><span><span class="co">## ------------------------------------------------</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="va">pr</span> <span class="op">&lt;-</span> <span class="fu"><a href="pr.html">pr</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">pr</span><span class="op">$</span><span class="fu">registerHook</span><span class="op">(</span><span class="st">"preroute"</span>, <span class="kw">function</span><span class="op">(</span><span class="va">req</span><span class="op">)</span><span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Routing a request for"</span>, <span class="va">req</span><span class="op">$</span><span class="va">PATH_INFO</span>, <span class="st">"...\n"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">pr</span><span class="op">$</span><span class="fu">registerHooks</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  preserialize<span class="op">=</span><span class="kw">function</span><span class="op">(</span><span class="va">req</span>, <span class="va">value</span><span class="op">)</span><span class="op">{</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="st">"About to serialize this value:"</span><span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">value</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>    <span class="co"># Must return the value since we took one in. Here we're not choosing</span></span></span>
<span class="r-in"><span>    <span class="co"># to mutate it, but we could.</span></span></span>
<span class="r-in"><span>    <span class="va">value</span></span></span>
<span class="r-in"><span>  <span class="op">}</span>,</span></span>
<span class="r-in"><span>  postserialize<span class="op">=</span><span class="kw">function</span><span class="op">(</span><span class="va">res</span><span class="op">)</span><span class="op">{</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="st">"We serialized the value as:"</span><span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">res</span><span class="op">$</span><span class="va">body</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">}</span></span></span>
<span class="r-in"><span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">pr</span><span class="op">$</span><span class="fu">handle</span><span class="op">(</span><span class="st">"GET"</span>, <span class="st">"/"</span>, <span class="kw">function</span><span class="op">(</span><span class="op">)</span><span class="op">{</span> <span class="fl">123</span> <span class="op">}</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## ------------------------------------------------</span></span></span>
<span class="r-in"><span><span class="co">## Method `Plumber$handle`</span></span></span>
<span class="r-in"><span><span class="co">## ------------------------------------------------</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="va">pr</span> <span class="op">&lt;-</span> <span class="fu"><a href="pr.html">pr</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">pr</span><span class="op">$</span><span class="fu">handle</span><span class="op">(</span><span class="st">"GET"</span>, <span class="st">"/"</span>, <span class="kw">function</span><span class="op">(</span><span class="op">)</span><span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="st">"&lt;html&gt;&lt;h1&gt;Programmatic Plumber!&lt;/h1&gt;&lt;/html&gt;"</span></span></span>
<span class="r-in"><span><span class="op">}</span>, serializer<span class="op">=</span><span class="fu">plumber</span><span class="fu">::</span><span class="fu"><a href="serializers.html">serializer_html</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## ------------------------------------------------</span></span></span>
<span class="r-in"><span><span class="co">## Method `Plumber$setSerializer`</span></span></span>
<span class="r-in"><span><span class="co">## ------------------------------------------------</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="va">pr</span> <span class="op">&lt;-</span> <span class="fu"><a href="pr.html">pr</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">pr</span><span class="op">$</span><span class="fu">setSerializer</span><span class="op">(</span><span class="fu"><a href="serializers.html">serializer_unboxed_json</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## ------------------------------------------------</span></span></span>
<span class="r-in"><span><span class="co">## Method `Plumber$set404Handler`</span></span></span>
<span class="r-in"><span><span class="co">## ------------------------------------------------</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="va">pr</span> <span class="op">&lt;-</span> <span class="fu"><a href="pr.html">pr</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">pr</span><span class="op">$</span><span class="fu">set404Handler</span><span class="op">(</span><span class="kw">function</span><span class="op">(</span><span class="va">req</span>, <span class="va">res</span><span class="op">)</span> <span class="op">{</span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="va">req</span><span class="op">$</span><span class="va">PATH_INFO</span><span class="op">)</span><span class="op">}</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## ------------------------------------------------</span></span></span>
<span class="r-in"><span><span class="co">## Method `Plumber$setErrorHandler`</span></span></span>
<span class="r-in"><span><span class="co">## ------------------------------------------------</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="va">pr</span> <span class="op">&lt;-</span> <span class="fu"><a href="pr.html">pr</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">pr</span><span class="op">$</span><span class="fu">setErrorHandler</span><span class="op">(</span><span class="kw">function</span><span class="op">(</span><span class="va">req</span>, <span class="va">res</span>, <span class="va">err</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/message.html" class="external-link">message</a></span><span class="op">(</span><span class="st">"Found error: "</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">err</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


   </div>
  <footer><div class="container">
  <div class="pkgdown-footer-left">
  <p>Developed by <a href="http://schloerke.com" class="external-link">Barret Schloerke</a>, <a href="https://trestletech.com/" class="external-link">Jeff Allen</a>, <a href="https://www.posit.co" class="external-link"><img src="https://www.tidyverse.org/posit-logo.svg" alt="Posit" height="16" width="62" style="margin-bottom: 3px;"></a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

  </div></footer></body></html>

